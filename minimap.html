<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb18030">
<title>Molloy Media Archaeology</title>
<meta name="description" content="A student-led project by Molloy College. Media Archaeology in the Boyne Valley.">
<meta name='viewport' content='initial-scale=1,maximum-scale=1' />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.css' rel='stylesheet' />
<style>

body, html {
  margin:0;
  padding:0;
  height: 100%;
  overflow: hidden;
}

<!--THIS DISABLES THE SCROLL FUNCTION -->

html {
  overflow-y: scroll !important;
}

<!--END SCROLLBAR BLOCK -->

<!--CSS FOR MAP -->

#map-container {
            height: 70%;
            padding-bottom: 0px;
            margin: 0px;
}

#map {
        display: block;
        height: 100%;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
}

.popup {
  text-align:center;
}

.popup .slideshow .image{
  display:none;
}

.popup .slideshow .image.active {
  display:block;
}

.popup .slideshow img {
  width:100%;
}

.popup .slideshow .caption {
  background:#eee;
  padding:10px;
}

.popup .cycle {
  padding:10px 0 20px;
}

.popup .cycle a.prev { float:left;
}

.popup .cycle a.next { float:right;
}

/* Adjustments to account for mapbox.css box-sizing rules */
.leaflet-control-zoomslider-knob { width:14px; height:6px; }
.leaflet-container .leaflet-control-zoomslider-body {
  -webkit-box-sizing:content-box;
     -moz-box-sizing:content-box;
          box-sizing:content-box;
  }

<!--End CSS for Map -->

</style>
</head>

<body>
<div id='map'></div>
<div id="map-container">

<div id='map'></div>
</div>


 <!-- API ACCESS FOR THE MAP -->
      <script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
      <script>
      L.mapbox.accessToken = 'pk.eyJ1IjoibWFwcGxlZ2EiLCJhIjoiY2lqbzk3aGVlMDB0bHRvbTVvNXB1azZxdyJ9.PpTLv2su5er4AqXhF-LK4A';
      var map = L.mapbox.map('map', 'mapbox.streets', {
        container: 'map',
      });

      var myLayer = L.mapbox.featureLayer().addTo(map);

      var geoJson = [{
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [12.476332, 41.896783]},
          "properties": {
              'title': 'Vini and Cucina Blasi',
              'marker-color': '#E48F0D',
              'marker-symbol': 'circle',
              'marker-size': 'medium',
              'images': [
                ['http://molloynewmedia.org/images/natalie/vinicucinoblasi.jpg','This is Vini & Cucina Blasi! The spritz and pasta we had was to die for! The prices: affordable, the vibes: immaculate, go again: absolutely, hotel: trivago'],
                ['http://molloynewmedia.org/images/natalie/vsprtiz.jpg','The spritz in questions: This was an orange flavored aperol spritz and let me tell ya, it was strrroooooonnng! I mean I am a lightweight, but this had me at that drunk-warm feeling after a few sips!'],
                ['http://molloynewmedia.org/images/natalie/cacioepepe.jpg','I had ordered the cacio e pepe, which translates to cheese and pepper, and it was very delicious! It was the first time I have had this dish and it was one of my favorites on the trip!'],
                ['http://molloynewmedia.org/images/natalie/sharespritz.jpg','Some strong spritz drinks and free limoncello shots later, my friends Heather and Emily thought it would be funny and cute to share the rest of my spritz; and the looks the waiters and the other patrons gave us were funny and well worth it for the picture!']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [12.4750259, 41.8931237]},
          "properties": {
              'title': 'BaGhetto Milky',
              'marker-color': '#F2DD07',
              'marker-symbol': 'square',
              'marker-size': 'medium',
              'images': [
                ['http://molloynewmedia.org/images/natalie/bghettomilky.jpg','This was a Kosher Italian restaurant with amazing pizza, and a great atmosphere! There were people playing music right outside the restaurant!'],
                ['','<iframe width="280" height="195" src="https://www.youtube.com/embed/VD4klER8UaE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>','The environment at this restaurant were very calming and enjoyable. These men were playing instruments right by us and serenated us as we ate. Then moved on when they saw new people just down the way, hey a playa gotta make their money!'],
                ['','<iframe width="280" height="195" src="https://www.youtube.com/embed/UBRy_3x-biI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>','You know we had to do the classic sterotyped "italian hand" that you see all over the internet lol. I was the leaderhead in this decision, I regret nothing hahaha']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [12.4745354, 41.8966557]},
          "properties": {
              'title': 'Buddy Roma Veggy Restaurante',
              'marker-color': '#70C03C',
              'marker-symbol': 'circle',
              'marker-size': 'medium',
              'images': [
                ['http://molloynewmedia.org/images/natalie/buddytablemin.jpg','An amazing, affordable vegan and vegetarian restaurant! There was even plant-based milk options!'],
                ['','<iframe width="280" height="195" src="https://www.youtube.com/embed/0fcybO6w0ko" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>','Here is my vlog and review for Buddy Roma. I had such a great time at this place and I will 100% be going back if I ever get the chance to travel again!'],
                ['http://molloynewmedia.org/images/natalie/buddyout.jpg','Before even going into the restaurant, the outside was very cute and aesthetically pleasing with many plants and natural colors throughout. The inside made us feel like we were in Los Angeles or something!'],
                ['http://molloynewmedia.org/images/natalie/veganburger.jpg','I ordered a burger, it was beyond meat duh, and it came with a side of home fries and a beet bun. I was essentially eating a pretty patty from Spongebob Squarepants!']
              ]
          }
      }, {
          type: 'Feature',
          "geometry": { "type": "Point", "coordinates": [12.488252, 41.893233]},
          "properties": {
              'title': 'il Giordino al Fori',
              'marker-color': '#239AE9',
              'marker-symbol': 'circle',
              'marker-size': 'medium',
              'images': [
                ['https://www.practice.molloynewmedia.org/menu.jpg','This restaurant was just across the way from the Colosseum and Roman Forum. After an exhausting day of walking around in the sun without eating much, this spot being so close was a good thing! It was the first place we stopped at, but I am glad we did becuase the food was incredible. Rome has yet to serve a bad meal!'],
                ['https://www.practice.molloynewmedia.org/coffee.jpg','This is my cafe latte because I could not resist getting coffee with every meal XD. For my food, I had ordered gnocci this time and *chefs kiss* it was so good. As much as gnocchi is a filling dish, on a small plate, I surprised myself and finshied the whole thing! There was something light in the thickness of the pasta, that may not make sense but that is the only way I can seem to describe it!']
             ]
          }
      }, {
          type: 'Feature',
           "geometry": { "type": "Point", "coordinates": [12.4922, 41.8902]},
           "properties": {
               'title': 'The Colosseum',
               'marker-color': '#A967DD',
               'marker-symbol': 'circle',
               'marker-size': 'large',
               'images': [
                 ['https://www.practice.molloynewmedia.org/group.jpg','This is a picture of me and my girls, Heather and Gabbie, taking a selfie in front of the beautiful archetecture that is the colosseum. This was taken by the ever-so-sneaky photographer and our professor Matt Applegate!'],
                 ['','<iframe width="280" height="195" src="https://www.youtube.com/embed/YcCiB71cHVk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>','Wanna know more a little more about the Colosseum as told by a Psych/English major? Click play and enjoy me saying some facts and showing my appreciation to the place with worst steps than Hagan!'],
                 ['https://www.practice.molloynewmedia.org/group2.jpg','Another group picture but this time it is the entire Molloy group together! This picture was taken by our tour guide; later on I edited the Pope and Hilary Duff into the awkward empty spaces in the picture! XD']
               ]
           }
     }]; 

// Add custom popup html to each marker.
myLayer.on('layeradd', function(e) {
    var marker = e.layer;
    var feature = marker.feature;
    var images = feature.properties.images
    var slideshowContent = '';

    for(var i = 0; i < images.length; i++) {
        var img = images[i];

        slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
                              '<img src="' + img[0] + '" />' +
                              '<div class="caption">' + img[1] + '</div>' +
                            '</div>';
    }

    // Create custom popup content
    var popupContent =  '<div id="' + feature.properties.id + '" class="popup">' +
                            '<h2>' + feature.properties.title + '</h2>' +
                            '<div class="slideshow">' +
                                slideshowContent +
                            '</div>' +
                            '<div class="cycle">' +
                                '<a href="#" class="prev">&laquo; Previous</a>' +
                                '<a href="#" class="next">Next &raquo;</a>' +
                            '</div>'
                        '</div>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    });
});

// Add features to the map
myLayer.setGeoJSON(geoJson);

$('#map').on('click', '.popup .cycle a', function() {
    var $slideshow = $('.slideshow'),
        $newSlide;

    if ($(this).hasClass('prev')) {
        $newSlide = $slideshow.find('.active').prev();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').last();
        }
    } else {
        $newSlide = $slideshow.find('.active').next();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').first();
        }
    }

    $slideshow.find('.active').removeClass('active').hide();
    $newSlide.addClass('active').show();
    return false;
});

<!-- SET THE MAP VIEW HERE -->
map.setView([41.9, 12.5], 12);
</script>


</body>
</html>
